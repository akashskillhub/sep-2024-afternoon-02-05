<!doctype html>
<html lang="en">

<head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Bootstrap By SKILLHUB</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        .parent {
            display: flex;
            flex-wrap: wrap;
            width: 300px;
        }

        .box {
            height: 100px;
            width: 100px;
            border: 2px solid gray;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 50px;
        }
    </style>

</head>

<body class="bg-light vh-100 d-flex justify-content-center align-items-center">

    <div id="player-card" class="card">
        <div class="card-header">Enter Player Name</div>
        <div class="card-body">
            <input id="p1" type="text" class="form-control" placeholder="Enter First Player Name">
            <input id="p2" type="text" class="form-control my-2" placeholder="Enter Second Player Name">
            <button onclick="startGame()" type="button" class="btn btn-primary w-100">Start Game</button>
        </div>
        <!-- <div class="card-footer">footer</div> -->
    </div>

    <div id="game-card" class="card d-none">
        <div class="card-header text-center">XNO Pro</div>
        <div class="card-body d-flex gap-3">
            <p><span id="p1-name">John : </span> <b id="p1-count">0</b></p>
            <p><span id="p2-name">Ross : </span> <b id="p2-count">0</b></p>
            <p><span>Draw : </span> <b id="draw-count">0</b></p>
            <p><span>Total : </span> <b id="total-count">0</b></p>
        </div>
        <div class="card-body">
            <div class="parent">
                <div onclick="playGame(1)" id="box-1" class="box"></div>
                <div onclick="playGame(2)" id="box-2" class="box"></div>
                <div onclick="playGame(3)" id="box-3" class="box"></div>
                <div onclick="playGame(4)" id="box-4" class="box"></div>
                <div onclick="playGame(5)" id="box-5" class="box"></div>
                <div onclick="playGame(6)" id="box-6" class="box"></div>
                <div onclick="playGame(7)" id="box-7" class="box"></div>
                <div onclick="playGame(8)" id="box-8" class="box"></div>
                <div onclick="playGame(9)" id="box-9" class="box"></div>
            </div>
        </div>
    </div>

    <script>
        let chance = "x"
        let player1 = document.getElementById("p1-name")
        let player2 = document.getElementById("p2-name")
        let player1WinCount = 0
        let player2WinCount = 0
        let drawCount = 0
        let totalCount = 0

        function startGame() {
            player1.innerHTML = document.querySelector("#p1").value
            player2.innerHTML = document.getElementById("p2").value
            document.getElementById("game-card").classList.remove("d-none")
            document.getElementById("player-card").classList.add("d-none")
        }

        function playGame(arg) {
            const box = document.getElementById(`box-${arg}`)

            if (!box.classList.contains("bg-danger") && !box.classList.contains("bg-success")) {
                if (chance === "x") {
                    box.classList.add("bg-danger")
                    box.innerHTML = "X"
                    chance = "o"
                } else {
                    box.classList.add("bg-success")
                    box.innerHTML = "O"
                    chance = "x"
                }
                if (!handleWinner() && checkAllFill()) {
                    drawCount++
                    console.log("match draw")
                    resetGame()
                }
            } else {
                console.warn("No Cheating")
            }
        }

        function handleWinner() {
            const b1 = document.getElementById('box-1')
            const b2 = document.getElementById('box-2')
            const b3 = document.getElementById('box-3')
            const b4 = document.getElementById('box-4')
            const b5 = document.getElementById('box-5')
            const b6 = document.getElementById('box-6')
            const b7 = document.getElementById('box-7')
            const b8 = document.getElementById('box-8')
            const b9 = document.getElementById('box-9')

            switch (true) {
                case b1.classList.contains("bg-danger") &&
                    b2.classList.contains("bg-danger") &&
                    b3.classList.contains('bg-danger'): player1WinCount++; console.log("x is winner"); resetGame(); return true; break

                case b4.classList.contains("bg-danger") &&
                    b5.classList.contains("bg-danger") &&
                    b6.classList.contains('bg-danger'): player1WinCount++; console.log("x is winner"); resetGame(); return true; break

                case b7.classList.contains("bg-danger") &&
                    b8.classList.contains("bg-danger") &&
                    b9.classList.contains('bg-danger'): player1WinCount++; console.log("x is winner"); resetGame(); return true; break

                case b1.classList.contains("bg-danger") &&
                    b4.classList.contains("bg-danger") &&
                    b7.classList.contains('bg-danger'): player1WinCount++; console.log("x is winner"); resetGame(); return true; break

                case b2.classList.contains("bg-danger") &&
                    b5.classList.contains("bg-danger") &&
                    b8.classList.contains('bg-danger'): player1WinCount++; console.log("x is winner"); resetGame(); return true; break

                case b3.classList.contains("bg-danger") &&
                    b6.classList.contains("bg-danger") &&
                    b9.classList.contains('bg-danger'): player1WinCount++; console.log("x is winner"); resetGame(); return true; break

                case b1.classList.contains("bg-danger") &&
                    b5.classList.contains("bg-danger") &&
                    b9.classList.contains('bg-danger'): player1WinCount++; console.log("x is winner"); resetGame(); return true; break

                case b3.classList.contains("bg-danger") &&
                    b5.classList.contains("bg-danger") &&
                    b7.classList.contains('bg-danger'): player1WinCount++; console.log("x is winner"); resetGame(); return true; break


                // SUCCESS
                case b1.classList.contains("bg-success") &&
                    b2.classList.contains("bg-success") &&
                    b3.classList.contains('bg-success'): player2WinCount++; console.log("O is winner"); resetGame(); return true; break

                case b4.classList.contains("bg-success") &&
                    b5.classList.contains("bg-success") &&
                    b6.classList.contains('bg-success'): player2WinCount++; console.log("O is winner"); resetGame(); return true; break

                case b7.classList.contains("bg-success") &&
                    b8.classList.contains("bg-success") &&
                    b9.classList.contains('bg-success'): player2WinCount++; console.log("O is winner"); resetGame(); return true; break

                case b1.classList.contains("bg-success") &&
                    b4.classList.contains("bg-success") &&
                    b7.classList.contains('bg-success'): player2WinCount++; console.log("O is winner"); resetGame(); return true; break

                case b2.classList.contains("bg-success") &&
                    b5.classList.contains("bg-success") &&
                    b8.classList.contains('bg-success'): player2WinCount++; console.log("O is winner"); resetGame(); return true; break

                case b3.classList.contains("bg-success") &&
                    b6.classList.contains("bg-success") &&
                    b9.classList.contains('bg-success'): player2WinCount++; console.log("O is winner"); resetGame(); return true; break

                case b1.classList.contains("bg-success") &&
                    b5.classList.contains("bg-success") &&
                    b9.classList.contains('bg-success'): player2WinCount++; console.log("O is winner"); resetGame(); return true; break

                case b3.classList.contains("bg-success") &&
                    b5.classList.contains("bg-success") &&
                    b7.classList.contains('bg-success'): player2WinCount++; console.log("O is winner"); resetGame(); return true; break


                default: return false;
            }
        }

        function resetGame() {
            const x = document.getElementsByClassName("box")
            for (const item of x) {
                item.classList.remove("bg-danger")
                item.classList.remove("bg-success")
                item.innerHTML = ""
            }

            document.getElementById("p1-count").innerHTML = player1WinCount
            document.getElementById("p2-count").innerHTML = player2WinCount
            document.getElementById("draw-count").innerHTML = drawCount
            document.getElementById("total-count").innerHTML = ++totalCount
            chance = "x"
        }

        function checkAllFill() {
            const allBoxes = document.getElementsByClassName("box")
            const filledBoxes = []
            for (const item of allBoxes) {
                if (item.classList.contains("bg-danger") || item.classList.contains("bg-success")) {
                    filledBoxes.push("dell")
                }
            }
            if (filledBoxes.length === 9) {
                console.warn("all fill");
                return true
            } else {
                console.log("not")
                return false
            }

        }


    </script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/js/bootstrap.bundle.min.js"></script>
</body>

</html>